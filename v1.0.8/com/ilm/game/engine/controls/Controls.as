package com.ilm.game.engine.controls{	import flash.display.Sprite;	import flash.display.Stage;	import com.ilm.utils.interactions.*;	import com.ilm.game.engine.objects.GameObject;	import com.ilm.game.engine.objects.MovementHandler;	import com.ilm.game.content.Bullet;	import com.ilm.game.GameClient;	import com.ilm.game.engine.weapon.*;	public class Controls extends Sprite	{		private var key:KeyObject;		private var mouse:MouseObject;		private var gameClass:GameClient;		private var _shoot:ShootingHandler;		public function Controls(passedStage:Stage, passedClient:GameClient):void		{			trace("controls enabled");			key = new KeyObject(passedStage);			mouse = new MouseObject(passedStage);			gameClass = passedClient;			_shoot = new ShootingHandler(passedClient);		}		public function detectKeys(obj:GameObject):void		{			if (key.isDown(37) || key.isDown(65)) {				//trace("left")				obj.dirX += -1;			}			if (key.isDown(39) || key.isDown(68)) {				//trace("right")				obj.dirX += 1;			}			if (key.isDown(38) || key.isDown(87)) {				//trace("up")				obj.dirY += -1;			}			if (key.isDown(40) || key.isDown(83)) {				//trace("down")				obj.dirY += 1;			}						if (mouse.isDown()) {				_shoot.fireWeapon(obj);			}						var _move:MovementHandler = new MovementHandler();			_move.moveObject(obj);			obj.dirX = 0;			obj.dirY = 0;						// weapon swapping for testing purposes			if (key.isDown(49)) {				if (obj.weapon != Weapons.PISTOL) {				_shoot.loadWeapon(Weapons.PISTOL, obj);				trace("weapon: " + obj.weapon.weaponName);				}			}			if (key.isDown(50)) {				if (obj.weapon != Weapons.SHOTGUN) {				_shoot.loadWeapon(Weapons.SHOTGUN, obj);				trace("weapon: " + obj.weapon.weaponName);				}			}			if (key.isDown(51)) {				if (obj.weapon != Weapons.MACHINE_GUN) {				_shoot.loadWeapon(Weapons.MACHINE_GUN, obj);				trace("weapon: " + obj.weapon.weaponName);				}			}			if (key.isDown(52)) {				if (obj.weapon != Weapons.BIG_GUN) {				_shoot.loadWeapon(Weapons.BIG_GUN, obj);				trace("weapon: " + obj.weapon.weaponName);				}			}		}	}}